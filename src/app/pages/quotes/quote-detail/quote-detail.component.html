<div class="container-fluid">
  <div *ngIf="item">
    <h1>{{ item.text }}</h1>
    <img [src]="item.image" alt="Quote Image" class="img-fluid">
  
    <div *ngFor="let category of item.categories; let i = index" class="mb-4">
      <div class="d-flex justify-content-between align-items-center">
        <h2 class="m-0">{{ category.name }}</h2>
        <button class="btn btn-sm btn-outline-primary" (click)="toggleCategory(i)"
          aria-label="Toggle Category">
          <span *ngIf="expandedCategories[i]">➖</span>
          <span *ngIf="!expandedCategories[i]">➕</span>
        </button>
      </div>
  
      <div *ngIf="expandedCategories[i]"
        class="button-group d-flex flex-wrap mt-2">
        <ng-container *ngFor="let option of category.options; let j = index">
          <ng-container *ngIf="isString(option); else subCategoryTemplate">
            <div class="p-2">
              <button class="option-button"
                [class.selected]="isOptionCompleted(i, j)"
                (click)="completeOption(i, j)">
                {{ option }}
              </button>
            </div>
          </ng-container>
          <ng-template #subCategoryTemplate>
            <div class="sub-category">
              <strong *ngIf="!isString(option)">{{ option.name }}:</strong>
              <div class="sub-button-group"
                *ngIf="!isString(option) && option.options">
                <div class="p-2"
                  *ngFor="let subOption of option.options; let k = index">
                  <button class="option-button"
                    [class.selected]="isSubOptionCompleted(i, j, k)"
                    (click)="completeOption(i, j, k)">
                    {{ subOption }}
                  </button>
                </div>
              </div>
            </div>
          </ng-template>
        </ng-container>
      </div>
    </div>
  </div>
</div>